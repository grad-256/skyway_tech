<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>SkyWay Video Chat</title>
    <link rel="stylesheet" href="/src/style.css">
    <link rel="stylesheet" href="/src/styles.css">
  </head>
  <body>
    <div class="video-container">
      <video id="local-video" autoplay playsinline></video>
      <div id="remote-media-area"></div>
      <div id="remote-audio-container"></div>
      
      <div class="control-panel">
        <div class="room-controls">
          <input id="room-name" type="text" placeholder="ルーム名" />
          <button id="join">参加</button>
          <button id="leave">退室</button>
        </div>
      </div>

      <div id="connection-status">
        <div class="test-controls">
          <button id="start-test" class="test-button">接続検証開始</button>
          <button id="stop-test" class="test-button" disabled>検証停止</button>
        </div>
        
        <div id="connectivity-test-results" style="display: none;">
          <h3>接続テスト結果</h3>
          <div class="test-result-grid">
            <div class="test-result-item">
              <span class="label">ICE接続:</span>
              <span id="ice-connectivity" class="value">-</span>
            </div>
            <div class="test-result-item">
              <span class="label">ネットワーク遅延:</span>
              <span id="network-latency" class="value">-</span>
            </div>
            <div class="test-result-item">
              <span class="label">音声デバイス:</span>
              <span id="audio-support" class="value">-</span>
            </div>
            <div class="test-result-item">
              <span class="label">映像デバイス:</span>
              <span id="video-support" class="value">-</span>
            </div>
            <div class="test-result-item">
              <span class="label">推奨接続タイプ:</span>
              <span id="recommended-type" class="value">-</span>
            </div>
            <div class="test-result-item">
              <span class="label">接続状態:</span>
              <span id="test-connection-state" class="value">-</span>
            </div>
          </div>
        </div>

        <div class="connection-metrics">
          <div class="metric-item">
            <span class="label">送信バイト:</span>
            <span id="bytes-sent" class="value">0 bytes</span>
          </div>
          <div class="metric-item">
            <span class="label">受信バイト:</span>
            <span id="bytes-received" class="value">0 bytes</span>
          </div>
          <div class="metric-item">
            <span class="label">RTT:</span>
            <span id="rtt" class="value">0 ms</span>
          </div>
        </div>

        <div class="user-info">
          <div class="info-item">
            <span class="label">自分のID:</span>
            <span id="my-id" class="value">-</span>
          </div>
        </div>
      </div>

      <div id="chat-container">
        <div id="message-area"></div>
        <form id="message-form">
          <input type="text" id="message-input" placeholder="メッセージを入力..." />
          <button type="submit">送信</button>
        </form>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
    <!-- ローディングオーバーレイ -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
      <div class="loading-spinner"></div>
      <div class="loading-message">接続テスト中...</div>
    </div>
  </body>
</html>
